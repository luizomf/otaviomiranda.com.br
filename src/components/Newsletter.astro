---
/**
 * ARQUIVO: Newsletter.astro
 *
 * O QUE FAZ:
 *   Secao de cadastro na newsletter. Exibe um formulario com campo
 *   de e-mail e botao "OK", ambos envolvidos por <ColorfulBorder>
 *   para o efeito de borda animada. O form envia via GET para o
 *   Substack (luizomf.substack.com/subscribe), abrindo em nova aba.
 *
 * USADO EM:
 *   - src/pages/index.astro
 *   - src/pages/[...slug].astro
 *   - src/pages/blog/[page].astro
 *
 * CONCEITO ASTRO:
 *   - Componente puramente server-side: nao possui <script> nem
 *     logica client-side. Todo o HTML e gerado no build (SSG).
 *   - Composicao de multiplos componentes Astro (Section,
 *     SectionHeader, ColorfulBorder) para montar a UI de forma
 *     declarativa, cada um com seu <style> scoped.
 *   - O <style> scoped aqui estiliza apenas os elementos internos
 *     (.newsletter-form, .newsletter-input, .newsletter-button)
 *     sem afetar outros formularios da pagina.
 *   - <ColorfulBorder> e usado duas vezes (input + button),
 *     mostrando como um componente wrapper generico pode ser
 *     reutilizado com conteudos diferentes via <slot />.
 */
import ColorfulBorder from './ColorfulBorder.astro';
import Section from './Section.astro';
import SectionHeader from './SectionHeader.astro';
---

<Section id='section-newsletter' class='article-section' theme='light'>
  <SectionHeader
    class='blog-header'
    eyeball='No seu e-mail'
    title='Newsletter'
    description='Junte-se a centenas de outros desenvolvedores e receba dicas e conteúdo técnico diretamente na sua caixa de entrada. Sem SPAM ou publicidade. Apenas conteúdo de qualidade.'
  >
    <form
      action='https://luizomf.substack.com/subscribe'
      method='GET'
      class='newsletter-form'
      target='_blank'
    >
      <input type='hidden' name='skip_redirect_check' value='true' />
      <input type='hidden' name='utm_medium' value='web' />
      <input type='hidden' name='utm_source' value='embed' />

      <ColorfulBorder>
        <input
          type='email'
          name='freeSignupEmail'
          placeholder='Seu melhor e-mail'
          required
          class='newsletter-input link'
        />
      </ColorfulBorder>

      <ColorfulBorder>
        <button type='submit' class='link newsletter-button'>OK</button>
      </ColorfulBorder>
    </form>
  </SectionHeader>
</Section>

<style>
  /* Newsletter */
  form.newsletter-form {
    display: flex;
    align-items: center;
    justify-content: center;
    gap: var(--spacings-sm-700) var(--spacings-sm-400);
    margin-top: clamp(var(--spacings-sm-600), 5vw, var(--spacings-sm-900));
    padding: clamp(var(--spacings-sm-600), 5vw, var(--spacings-sm-900));
    flex-wrap: wrap;
  }

  .newsletter-form .newsletter-input {
    flex: 1;
    border: none;
    padding: var(--spacings-sm-400) var(--spacings-sm-600);
    border-radius: var(--border-radius-pill);
    font-family: inherit;
    font-size: var(--font-size-xsm);
    min-width: 220px;
    background: hsl(from var(--main-clr-shade) h s 100% / 1);
    color: hsl(from var(--main-clr-shade) h s 30% / 1);
    font-weight: 400;
    outline: none;
    transition:
      border-color var(--transition-fast),
      box-shadow var(--transition-fast);
  }

  @media (min-width: 720px) {
    .newsletter-form .newsletter-input {
      min-width: 380px;
    }
  }

  @media (min-width: 980px) {
    .newsletter-form .newsletter-input {
      min-width: 480px;
    }
  }

  @media (max-width: 400px) {
    .newsletter-form .newsletter-input {
      min-width: 180px;
      width: 100%;
    }
  }

  .newsletter-input:focus {
    opacity: 1;
  }

  .newsletter-form .newsletter-button {
    padding: var(--spacings-sm-400) var(--spacings-sm-800);
    border-radius: var(--border-radius-pill);
    border: none;
    font-family: inherit;
    font-size: var(--font-size-xsm);
    font-weight: 800;
    text-transform: uppercase;
    letter-spacing: 0.05em;
    cursor: pointer;
    white-space: nowrap;
    transition:
      transform var(--transition-fast),
      background-color var(--transition-fast);
    flex: 1;
    background: #000;
    color: #fff;
  }

  .newsletter-button:hover {
    transform: scale(1.02);
  }
</style>
