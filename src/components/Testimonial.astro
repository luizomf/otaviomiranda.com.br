---
type Props = {
  slug: string;
  author: string;
  role: string;
  text: string;
  proofLabel?: string;
};

const { slug, author, role, text, proofLabel = 'Ver' } = Astro.props as Props;
---

<article class='testimonial-card glass'>
  <p class='testimonial-text'>"{text}"</p>
  <div class='testimonial-footer'>
    <img
      loading='lazy'
      src={`/imgs/testimonials/${slug}_profile.png`}
      alt={`Foto de perfil de ${author}`}
      width='48'
      height='48'
      class='testimonial-avatar'
    />
    <div class='testimonial-author-wrapper'>
      <span class='testimonial-author'>{author}</span>
      <span class='testimonial-role'>{role}</span>
      <a
        href={`/imgs/testimonials/${slug}.png`}
        target='_blank'
        rel='noopener'
        class='testimonial-proof-link'
      >
        {proofLabel}
      </a>
    </div>
  </div>
</article>

<style>
  .testimonial-card {
    break-inside: avoid;
    padding: var(--spacings-sm-800);
    margin-bottom: clamp(var(--spacings-sm-800), 4vw, var(--spacings-lg-400));
    display: flex;
    flex-direction: column;
    gap: var(--spacings-sm-400);
    border-radius: var(--border-radius-lg);
    background-color: rgba(255, 255, 255, 0.02);
    backdrop-filter: blur(2px);
    transition:
      transform 300ms ease,
      box-shadow 300ms ease;
  }

  .testimonial-card:hover {
    transform: translateY(-2px);
  }

  .testimonial-text {
    font-size: var(--font-size-md);
    line-height: 1.6;
    color: hsl(from var(--main-clr-shade) h s 70% / 1);
    font-style: italic;
    font-weight: 300;
  }

  .testimonial-footer {
    display: grid;
    justify-items: start;
    align-items: start;
    grid-template-columns: 64px 1fr;
    gap: var(--spacings-sm-400);
    margin-top: auto;
  }

  .testimonial-avatar {
    margin: 0;
    padding: 0;
    align-self: start;
    width: 48px;
    height: 48px;
    border-radius: 50%;
    background-color: rgba(255, 255, 255, 0.05);
  }

  .testimonial-author-wrapper {
    display: flex;
    flex-direction: column;
  }

  .testimonial-author {
    font-weight: 700;
    font-size: var(--font-size-xsm);
    color: hsl(from var(--main-clr-shade) h s 70% / 1);
  }

  .testimonial-role {
    font-size: var(--font-size-xxsm);
    color: hsl(from var(--main-clr-shade) h s 60% / 1);
    font-weight: 400;
    margin-top: 2px;
  }

  .testimonial-proof-link {
    margin-top: var(--spacings-sm-100);
    font-size: var(--font-size-xxxsm);
    color: hsl(from var(--main-clr-shade) h s 62% / 1);
    text-decoration: none;
    width: fit-content;
    border-bottom: 1px dashed hsl(from var(--main-clr-shade) h s 45% / 1);
    transition:
      color 220ms ease,
      border-color 220ms ease;
  }

  .testimonial-proof-link:hover,
  .testimonial-proof-link:focus-visible {
    color: hsl(from var(--main-clr-shade) h s 85% / 1);
    border-color: hsl(from var(--main-clr-shade) h s 85% / 1);
  }

  @media (max-width: 320px) {
    .testimonial-footer {
      grid-template-columns: 1fr;
      justify-items: center;
      align-items: center;
      text-align: center;
    }

    .testimonial-author-wrapper {
      align-items: center;
      text-align: center;
    }
  }
</style>
